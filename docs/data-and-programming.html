<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>4 Data and Programming | Lecture Note for Applied Econometrics</title>
  <meta name="description" content="4 Data and Programming | Lecture Note for Applied Econometrics">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="4 Data and Programming | Lecture Note for Applied Econometrics" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Data and Programming | Lecture Note for Applied Econometrics" />
  
  
  

<meta name="author" content="Yuta Toyama">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introduction-of-r-and-r-studio.html">
<link rel="next" href="data-frame.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-this"><i class="fa fa-check"></i><b>1.1</b> About this</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#update-april-23-2019"><i class="fa fa-check"></i><b>1.2</b> Update: April 23, 2019</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#update-april-16-2019"><i class="fa fa-check"></i><b>1.3</b> Update: April 16, 2019</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#acknowledgement-as-of-april-16-2019"><i class="fa fa-check"></i><b>1.4</b> Acknowledgement (as of April 16, 2019)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-the-course.html"><a href="introduction-to-the-course.html"><i class="fa fa-check"></i><b>2</b> Introduction to the course</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-the-course.html"><a href="introduction-to-the-course.html#what-is-econometrics"><i class="fa fa-check"></i><b>2.1</b> What is econometrics?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-the-course.html"><a href="introduction-to-the-course.html#why-do-we-need-to-learn-computation"><i class="fa fa-check"></i><b>2.2</b> Why do we need to learn computation</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-the-course.html"><a href="introduction-to-the-course.html#why-do-we-use-r"><i class="fa fa-check"></i><b>2.3</b> Why do we use R?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html"><i class="fa fa-check"></i><b>3</b> Introduction of <code>R</code> and <code>R studio</code></a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html#getting-started"><i class="fa fa-check"></i><b>3.1</b> Getting Started</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html#helps"><i class="fa fa-check"></i><b>3.2</b> Helps</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html#quick-tour-of-rstudio"><i class="fa fa-check"></i><b>3.3</b> Quick tour of Rstudio</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html#basic-calculations"><i class="fa fa-check"></i><b>3.4</b> Basic Calculations</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html#getting-help"><i class="fa fa-check"></i><b>3.5</b> Getting Help</a></li>
<li class="chapter" data-level="3.6" data-path="introduction-of-r-and-r-studio.html"><a href="introduction-of-r-and-r-studio.html#installing-packages"><i class="fa fa-check"></i><b>3.6</b> Installing Packages</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-and-programming.html"><a href="data-and-programming.html"><i class="fa fa-check"></i><b>4</b> Data and Programming</a><ul>
<li class="chapter" data-level="4.1" data-path="data-and-programming.html"><a href="data-and-programming.html#data-types"><i class="fa fa-check"></i><b>4.1</b> Data Types</a></li>
<li class="chapter" data-level="4.2" data-path="data-and-programming.html"><a href="data-and-programming.html#data-structures"><i class="fa fa-check"></i><b>4.2</b> Data Structures</a></li>
<li class="chapter" data-level="4.3" data-path="data-and-programming.html"><a href="data-and-programming.html#vectors"><i class="fa fa-check"></i><b>4.3</b> Vectors</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-and-programming.html"><a href="data-and-programming.html#basics-of-vectors"><i class="fa fa-check"></i><b>4.3.1</b> Basics of vectors</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-and-programming.html"><a href="data-and-programming.html#useful-functions-for-creating-vectors"><i class="fa fa-check"></i><b>4.3.2</b> Useful functions for creating vectors</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-and-programming.html"><a href="data-and-programming.html#subsetting"><i class="fa fa-check"></i><b>4.3.3</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-and-programming.html"><a href="data-and-programming.html#vectorization"><i class="fa fa-check"></i><b>4.4</b> Vectorization</a></li>
<li class="chapter" data-level="4.5" data-path="data-and-programming.html"><a href="data-and-programming.html#logical-operators"><i class="fa fa-check"></i><b>4.5</b> Logical Operators</a></li>
<li class="chapter" data-level="4.6" data-path="data-and-programming.html"><a href="data-and-programming.html#matrices"><i class="fa fa-check"></i><b>4.6</b> Matrices</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-and-programming.html"><a href="data-and-programming.html#basics"><i class="fa fa-check"></i><b>4.6.1</b> Basics</a></li>
<li class="chapter" data-level="4.6.2" data-path="data-and-programming.html"><a href="data-and-programming.html#matrix-calculations"><i class="fa fa-check"></i><b>4.6.2</b> Matrix calculations</a></li>
<li class="chapter" data-level="4.6.3" data-path="data-and-programming.html"><a href="data-and-programming.html#getting-information-for-matrix"><i class="fa fa-check"></i><b>4.6.3</b> Getting information for matrix</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-and-programming.html"><a href="data-and-programming.html#lists"><i class="fa fa-check"></i><b>4.7</b> Lists</a></li>
<li class="chapter" data-level="4.8" data-path="data-and-programming.html"><a href="data-and-programming.html#data-frames"><i class="fa fa-check"></i><b>4.8</b> Data Frames</a></li>
<li class="chapter" data-level="4.9" data-path="data-and-programming.html"><a href="data-and-programming.html#programming-basics--control-flow-"><i class="fa fa-check"></i><b>4.9</b> Programming Basics -Control flow-</a><ul>
<li class="chapter" data-level="4.9.1" data-path="data-and-programming.html"><a href="data-and-programming.html#ifelse"><i class="fa fa-check"></i><b>4.9.1</b> if/else</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="data-and-programming.html"><a href="data-and-programming.html#for-loop"><i class="fa fa-check"></i><b>4.10</b> <code>for</code> loop</a></li>
<li class="chapter" data-level="4.11" data-path="data-and-programming.html"><a href="data-and-programming.html#functions"><i class="fa fa-check"></i><b>4.11</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-frame.html"><a href="data-frame.html"><i class="fa fa-check"></i><b>5</b> Data frame</a><ul>
<li class="chapter" data-level="5.1" data-path="data-frame.html"><a href="data-frame.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="data-frame.html"><a href="data-frame.html#load-csv-file"><i class="fa fa-check"></i><b>5.2</b> Load csv file</a></li>
<li class="chapter" data-level="5.3" data-path="data-frame.html"><a href="data-frame.html#examine-dataframe"><i class="fa fa-check"></i><b>5.3</b> Examine dataframe</a></li>
<li class="chapter" data-level="5.4" data-path="data-frame.html"><a href="data-frame.html#subsetting-data"><i class="fa fa-check"></i><b>5.4</b> Subsetting data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exercise-1.html"><a href="exercise-1.html"><i class="fa fa-check"></i><b>6</b> Exercise 1</a><ul>
<li class="chapter" data-level="6.1" data-path="exercise-1.html"><a href="exercise-1.html#update-as-of-10am-april-18th"><i class="fa fa-check"></i><b>6.1</b> Update (as of 10am, April 18th)</a></li>
<li class="chapter" data-level="6.2" data-path="exercise-1.html"><a href="exercise-1.html#question-examine-the-law-of-large-numbers-through-numerical-simulations"><i class="fa fa-check"></i><b>6.2</b> Question: Examine the law of large numbers through numerical simulations</a><ul>
<li class="chapter" data-level="6.2.1" data-path="exercise-1.html"><a href="exercise-1.html#how-to-implement"><i class="fa fa-check"></i><b>6.2.1</b> How to implement</a></li>
<li class="chapter" data-level="6.2.2" data-path="exercise-1.html"><a href="exercise-1.html#what-to-submit"><i class="fa fa-check"></i><b>6.2.2</b> What to submit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html"><i class="fa fa-check"></i><b>7</b> A Review of Statistics</a><ul>
<li class="chapter" data-level="7.1" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html#estimation"><i class="fa fa-check"></i><b>7.1</b> Estimation</a><ul>
<li class="chapter" data-level="7.1.1" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html#properties-of-the-estimator"><i class="fa fa-check"></i><b>7.1.1</b> Properties of the estimator</a></li>
<li class="chapter" data-level="7.1.2" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html#sample-mean-bary-is-unbiased-and-consistent"><i class="fa fa-check"></i><b>7.1.2</b> Sample mean <span class="math inline">\(\bar{Y}\)</span> is unbiased and consistent</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html#hypothesis-testing"><i class="fa fa-check"></i><b>7.2</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="7.2.1" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>7.2.1</b> Central limit theorem</a></li>
<li class="chapter" data-level="7.2.2" data-path="a-review-of-statistics.html"><a href="a-review-of-statistics.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>7.2.2</b> Hypothesis testing</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lecture Note for Applied Econometrics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-and-programming" class="section level1">
<h1><span class="header-section-number">4</span> Data and Programming</h1>
<div id="data-types" class="section level2">
<h2><span class="header-section-number">4.1</span> Data Types</h2>
<p><code>R</code> has a number of basic data <em>types</em>.</p>
<ul>
<li>Numeric
<ul>
<li>Also known as Double. The default type when dealing with numbers.</li>
<li>Examples: <code>1</code>, <code>1.0</code>, <code>42.5</code></li>
</ul></li>
<li>Logical
<ul>
<li>Two possible values: <code>TRUE</code> and <code>FALSE</code></li>
<li>You can also use <code>T</code> and <code>F</code>, but this is <em>not</em> recommended.</li>
<li><code>NA</code> is also considered logical.</li>
</ul></li>
<li>Character
<ul>
<li>Examples: <code>&quot;a&quot;</code>, <code>&quot;Statistics&quot;</code>, <code>&quot;1 plus 2.&quot;</code></li>
</ul></li>
</ul>
<!-- 
- Integer
    - Examples: `1L`, `2L`, `42L`
- Complex
    - Example: `4 + 2i`
-->
</div>
<div id="data-structures" class="section level2">
<h2><span class="header-section-number">4.2</span> Data Structures</h2>
<ul>
<li><code>R</code> also has a number of basic data <em>structures</em>.</li>
<li>A data structure is either
<ul>
<li>homogeneous (all elements are of the same data type)</li>
<li>heterogeneous (elements can be of more than one data type).</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Dimension</th>
<th><strong>Homogeneous</strong></th>
<th><strong>Heterogeneous</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Vector</td>
<td>List</td>
</tr>
<tr class="even">
<td>2</td>
<td>Matrix</td>
<td>Data Frame</td>
</tr>
<tr class="odd">
<td>3+</td>
<td>Array</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">4.3</span> Vectors</h2>
<div id="basics-of-vectors" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Basics of vectors</h3>
<ul>
<li>Many operations in <code>R</code> make heavy use of <strong>vectors</strong>.
<ul>
<li>Vectors in <code>R</code> are indexed starting at <code>1</code>.</li>
</ul></li>
<li>The most common way to create a vector in <code>R</code> is using the <code>c()</code> function, which is short for “combine.”&quot;</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>## [1] 1 3 5 7 8 9</code></pre>
<ul>
<li>If we would like to store this vector in a <strong>variable</strong> we can do so with the <strong>assignment</strong> operator <code>=</code>.
<ul>
<li>The variable <code>x</code> now holds the vector we just created, and we can access the vector by typing <code>x</code>.</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)
x</code></pre></div>
<pre><code>## [1] 1 3 5 7 8 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The following does the same thing.</span>
x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)
x</code></pre></div>
<pre><code>## [1] 1 3 5 7 8 9</code></pre>
<ul>
<li>The operator <code>=</code> and <code>&lt;-</code> work as an assignment operator.
<ul>
<li>You can use both. This does not matter usually.</li>
<li>If you are interested in the weird cases where the difference matters, check out <a href="http://www.burns-stat.com/documents/books/the-r-inferno/" target="_blank">The R Inferno</a>.</li>
</ul></li>
<li>In <code>R</code> code the line starting with <code>#</code> is <code>comment</code>, which is ignored when you run the fode.</li>
</ul>
<!-- 
Because vectors must contain elements that are all the same type, `R` will automatically coerce to a single type when attempting to create a vector that combines multiple types.


```r
c(42, "Statistics", TRUE)
```

```
## [1] "42"         "Statistics" "TRUE"
```

```r
c(42, TRUE)
```

```
## [1] 42  1
```
-->
<ul>
<li>A vector based on a sequence of numbers.</li>
<li>The quickest and easiest way to do this is with the <code>:</code> operator, which creates a sequence of integers between two specified integers.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>)</code></pre></div>
<pre><code>##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
##  [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
##  [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
##  [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
##  [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100</code></pre>
<ul>
<li>By putting parentheses around the assignment,
<ul>
<li><code>R</code> both stores the vector in a variable called <code>y</code> and</li>
<li>automatically outputs <code>y</code> to the console.</li>
</ul></li>
</ul>
</div>
<div id="useful-functions-for-creating-vectors" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Useful functions for creating vectors</h3>
<ul>
<li>Use the <code>seq()</code> function for a more general sequence.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dt">from =</span> <span class="fl">1.5</span>, <span class="dt">to =</span> <span class="fl">4.2</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)</code></pre></div>
<pre><code>##  [1] 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9 3.0 3.1
## [18] 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 4.0 4.1 4.2</code></pre>
<ul>
<li>Here, the input labels <code>from</code>, <code>to</code>, and <code>by</code> are optional.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="fl">1.5</span>, <span class="fl">4.2</span>, <span class="fl">0.1</span>)</code></pre></div>
<pre><code>##  [1] 1.5 1.6 1.7 1.8 1.9 2.0 2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9 3.0 3.1
## [18] 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 4.0 4.1 4.2</code></pre>
<ul>
<li>The <code>rep()</code> function repeat a single value a number of times.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="st">&quot;A&quot;</span>, <span class="dt">times =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot;</code></pre>
<ul>
<li>The <code>rep()</code> function can be used to repeat a vector some number of times.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(x, <span class="dt">times =</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>##  [1] 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9</code></pre>
<ul>
<li>We have now seen four different ways to create vectors:
<ol style="list-style-type: decimal">
<li><code>c()</code></li>
<li><code>:</code></li>
<li><code>seq()</code></li>
<li><code>rep()</code></li>
</ol></li>
<li>They are often used together.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(x, <span class="kw">rep</span>(<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">2</span>), <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">42</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>)</code></pre></div>
<pre><code>##  [1]  1  3  5  7  8  9  1  3  5  7  9  1  3  5  7  9  1  3  5  7  9  1  2
## [24]  3 42  2  3  4</code></pre>
<ul>
<li>The length of a vector can be obtained with the <code>length()</code> function.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(x)</code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(y)</code></pre></div>
<pre><code>## [1] 100</code></pre>
</div>
<div id="subsetting" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Subsetting</h3>
<ul>
<li>Use square brackets, <code>[]</code>, to obtain a subset of a vector.</li>
<li>We see that <code>x[1]</code> returns the first element.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code>## [1] 1 3 5 7 8 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 5</code></pre>
<ul>
<li>We can also exclude certain indexes, in this case the second element.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="op">-</span><span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 1 5 7 8 9</code></pre>
<ul>
<li>We can subset based on a vector of indices.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>)]</code></pre></div>
<pre><code>## [1] 1 5 7</code></pre>
<ul>
<li>We could instead use a vector of logical values.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z =<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)
z</code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[z]</code></pre></div>
<pre><code>## [1] 1 3 7 8</code></pre>
</div>
</div>
<div id="vectorization" class="section level2">
<h2><span class="header-section-number">4.4</span> Vectorization</h2>
<ul>
<li>One of the biggest strengths of <code>R</code> is its use of vectorized operations.
<ul>
<li>Frequently the lack of understanding of this concept leads of a belief that <code>R</code> is <em>slow</em>.</li>
<li><code>R</code> is not the fastest language, but it has a reputation for being slower than it really is.)</li>
</ul></li>
<li>When a function like <code>log()</code> is called on a vector <code>x</code>, a vector is returned which has applied the function to each element of the vector <code>x</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>##  [1]  2  3  4  5  6  7  8  9 10 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>x</code></pre></div>
<pre><code>##  [1]  2  4  6  8 10 12 14 16 18 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">^</span><span class="st"> </span>x</code></pre></div>
<pre><code>##  [1]    2    4    8   16   32   64  128  256  512 1024</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(x)</code></pre></div>
<pre><code>##  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
##  [8] 2.828427 3.000000 3.162278</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(x)</code></pre></div>
<pre><code>##  [1] 0.0000000 0.6931472 1.0986123 1.3862944 1.6094379 1.7917595 1.9459101
##  [8] 2.0794415 2.1972246 2.3025851</code></pre>
</div>
<div id="logical-operators" class="section level2">
<h2><span class="header-section-number">4.5</span> Logical Operators</h2>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Summary</th>
<th>Example</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x &lt; y</code></td>
<td><code>x</code> less than <code>y</code></td>
<td><code>3 &lt; 42</code></td>
<td>TRUE</td>
</tr>
<tr class="even">
<td><code>x &gt; y</code></td>
<td><code>x</code> greater than <code>y</code></td>
<td><code>3 &gt; 42</code></td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>x &lt;= y</code></td>
<td><code>x</code> less than or equal to <code>y</code></td>
<td><code>3 &lt;= 42</code></td>
<td>TRUE</td>
</tr>
<tr class="even">
<td><code>x &gt;= y</code></td>
<td><code>x</code> greater than or equal to <code>y</code></td>
<td><code>3 &gt;= 42</code></td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td><code>x == y</code></td>
<td><code>x</code>equal to <code>y</code></td>
<td><code>3 == 42</code></td>
<td>FALSE</td>
</tr>
<tr class="even">
<td><code>x != y</code></td>
<td><code>x</code> not equal to <code>y</code></td>
<td><code>3 != 42</code></td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td><code>!x</code></td>
<td>not <code>x</code></td>
<td><code>!(3 &gt; 42)</code></td>
<td>TRUE</td>
</tr>
<tr class="even">
<td><code>x | y</code></td>
<td><code>x</code> or <code>y</code></td>
<td><code>(3 &gt; 42) | TRUE</code></td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td><code>x &amp; y</code></td>
<td><code>x</code> and <code>y</code></td>
<td><code>(3 &lt; 4) &amp; ( 42 &gt; 13)</code></td>
<td>TRUE</td>
</tr>
</tbody>
</table>
<ul>
<li>Logical operators are vectorized.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">==</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">|</span><span class="st"> </span>x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<ul>
<li>This is extremely useful for subsetting.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 5 7 8 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 1 5 7 8 9</code></pre>
<div id="short-exercise" class="section level4">
<h4><span class="header-section-number">4.5.0.1</span> Short exercise</h4>
<ol style="list-style-type: decimal">
<li>Create the vector <span class="math inline">\(z = (1,2,1,2,1,2)\)</span>, which has the same length as <span class="math inline">\(x\)</span>.</li>
<li>Pick up the elements of <span class="math inline">\(x\)</span> which corresponds to 1 in the vector <span class="math inline">\(z\)</span>.</li>
</ol>
<!-- 
## More Vectorization


```r
x = c(1, 3, 5, 7, 8, 9)
y = 1:100
```


```r
x + 2
```

```
## [1]  3  5  7  9 10 11
```

```r
x + rep(2, 6)
```

```
## [1]  3  5  7  9 10 11
```


```r
x > 3
```

```
## [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE
```

```r
x > rep(3, 6)
```

```
## [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE
```


```r
x + y
```

```
## Warning in x + y: 長いオブジェクトの長さが短いオブジェクトの長さの倍数にな
## っていません
```

```
##   [1]   2   5   8  11  13  15   8  11  14  17  19  21  14  17  20  23  25
##  [18]  27  20  23  26  29  31  33  26  29  32  35  37  39  32  35  38  41
##  [35]  43  45  38  41  44  47  49  51  44  47  50  53  55  57  50  53  56
##  [52]  59  61  63  56  59  62  65  67  69  62  65  68  71  73  75  68  71
##  [69]  74  77  79  81  74  77  80  83  85  87  80  83  86  89  91  93  86
##  [86]  89  92  95  97  99  92  95  98 101 103 105  98 101 104 107
```

```r
length(x)
```

```
## [1] 6
```

```r
length(y)
```

```
## [1] 100
```

```r
length(y) / length(x)
```

```
## [1] 16.66667
```

```r
(x + y) - y
```

```
## Warning in x + y: 長いオブジェクトの長さが短いオブジェクトの長さの倍数にな
## っていません
```

```
##   [1] 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8
##  [36] 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7
##  [71] 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7 8 9 1 3 5 7
```


```r
y = 1:60
x + y
```

```
##  [1]  2  5  8 11 13 15  8 11 14 17 19 21 14 17 20 23 25 27 20 23 26 29 31
## [24] 33 26 29 32 35 37 39 32 35 38 41 43 45 38 41 44 47 49 51 44 47 50 53
## [47] 55 57 50 53 56 59 61 63 56 59 62 65 67 69
```

```r
length(y) / length(x)
```

```
## [1] 10
```


```r
rep(x, 10) + y
```

```
##  [1]  2  5  8 11 13 15  8 11 14 17 19 21 14 17 20 23 25 27 20 23 26 29 31
## [24] 33 26 29 32 35 37 39 32 35 38 41 43 45 38 41 44 47 49 51 44 47 50 53
## [47] 55 57 50 53 56 59 61 63 56 59 62 65 67 69
```


```r
all(x + y == rep(x, 10) + y)
```

```
## [1] TRUE
```

```r
identical(x + y, rep(x, 10) + y)
```

```
## [1] TRUE
```


```r
# ?any
# ?all.equal
```
-->
</div>
</div>
<div id="matrices" class="section level2">
<h2><span class="header-section-number">4.6</span> Matrices</h2>
<div id="basics" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Basics</h3>
<ul>
<li><code>R</code> can also be used for <strong>matrix</strong> calculations.</li>
<li><p>Matrices have rows and columns containing a single data type.</p></li>
<li><p>Matrices can be created using the <code>matrix</code> function.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span>
x</code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7 8 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X =<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
X</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<ul>
<li>We are using two different variables:
<ul>
<li>lower case <code>x</code>, which stores a vector and</li>
<li>capital <code>X</code>, which stores a matrix.</li>
</ul></li>
<li>By default the <code>matrix</code> function reorders a vector into columns, but we can also tell <code>R</code> to use rows instead.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Y =<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)
Y</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9</code></pre>
<ul>
<li>a matrix of a specified dimension where every element is the same, in this case <code>0</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Z =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>)
Z</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    0    0    0    0
## [2,]    0    0    0    0</code></pre>
<ul>
<li>Matrices can be subsetted using square brackets, <code>[]</code>.</li>
<li>However, since matrices are two-dimensional, we need to specify both a row and a column when subsetting.</li>
<li>Here we get the element in the first row and the second column.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X[<span class="dv">1</span>, <span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 4</code></pre>
<ul>
<li>We could also subset an entire row or column.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X[<span class="dv">1</span>, ]</code></pre></div>
<pre><code>## [1] 1 4 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X[, <span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 4 5 6</code></pre>
<ul>
<li>Matrices can also be created by combining vectors as columns, using <code>cbind</code>, or combining vectors as rows, using <code>rbind</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span>
<span class="kw">rev</span>(x)</code></pre></div>
<pre><code>## [1] 9 8 7 6 5 4 3 2 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>## [1] 1 1 1 1 1 1 1 1 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(x, <span class="kw">rev</span>(x), <span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>))</code></pre></div>
<pre><code>##   [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
## x    1    2    3    4    5    6    7    8    9
##      9    8    7    6    5    4    3    2    1
##      1    1    1    1    1    1    1    1    1</code></pre>
<ul>
<li>When using <code>rbind</code> and <code>cbind</code> you can specify “argument” names that will be used as column names.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cbind</span>(<span class="dt">col_1 =</span> x, <span class="dt">col_2 =</span> <span class="kw">rev</span>(x), <span class="dt">col_3 =</span> <span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>))</code></pre></div>
<pre><code>##       col_1 col_2 col_3
##  [1,]     1     9     1
##  [2,]     2     8     1
##  [3,]     3     7     1
##  [4,]     4     6     1
##  [5,]     5     5     1
##  [6,]     6     4     1
##  [7,]     7     3     1
##  [8,]     8     2     1
##  [9,]     9     1     1</code></pre>
</div>
<div id="matrix-calculations" class="section level3">
<h3><span class="header-section-number">4.6.2</span> Matrix calculations</h3>
<ul>
<li>Perform matrix calculations.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span>
y =<span class="st"> </span><span class="dv">9</span><span class="op">:</span><span class="dv">1</span>
X =<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dv">3</span>, <span class="dv">3</span>)
Y =<span class="st"> </span><span class="kw">matrix</span>(y, <span class="dv">3</span>, <span class="dv">3</span>)
X</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Y</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    9    6    3
## [2,]    8    5    2
## [3,]    7    4    1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X <span class="op">+</span><span class="st"> </span>Y</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   10   10   10
## [2,]   10   10   10
## [3,]   10   10   10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X <span class="op">-</span><span class="st"> </span>Y</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   -8   -2    4
## [2,]   -6    0    6
## [3,]   -4    2    8</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X <span class="op">*</span><span class="st"> </span>Y</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    9   24   21
## [2,]   16   25   16
## [3,]   21   24    9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X <span class="op">/</span><span class="st"> </span>Y</code></pre></div>
<pre><code>##           [,1]      [,2]     [,3]
## [1,] 0.1111111 0.6666667 2.333333
## [2,] 0.2500000 1.0000000 4.000000
## [3,] 0.4285714 1.5000000 9.000000</code></pre>
<ul>
<li>Note that <code>X * Y</code> is <strong>not</strong> matrix multiplication.</li>
<li>It is element by element multiplication. (Same for <code>X / Y</code>).</li>
<li><p>Matrix multiplication uses <code>%*%</code>.</p></li>
<li><p><code>t()</code> which gives the transpose of a matrix</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X <span class="op">%*%</span><span class="st"> </span>Y</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   90   54   18
## [2,]  114   69   24
## [3,]  138   84   30</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(X)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9</code></pre>
<ul>
<li><code>solve()</code> which returns the inverse of a square matrix if it is invertible.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Z =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">2</span>, <span class="op">-</span><span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">3</span>, <span class="op">-</span><span class="dv">2</span>, <span class="dv">16</span>), <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)
Z</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    9    2   -3
## [2,]    2    4   -2
## [3,]   -3   -2   16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">solve</span>(Z)</code></pre></div>
<pre><code>##             [,1]        [,2]       [,3]
## [1,]  0.12931034 -0.05603448 0.01724138
## [2,] -0.05603448  0.29094828 0.02586207
## [3,]  0.01724138  0.02586207 0.06896552</code></pre>
<ul>
<li>To verify that <code>solve(Z)</code> returns the inverse, we multiply it by <code>Z</code>.
<ul>
<li>We would expect this to return the identity matrix.</li>
<li>However we see that this is not the case due to some computational issues.</li>
<li>However, <code>R</code> also has the <code>all.equal()</code> function which checks for equality, with some small tolerance which accounts for some computational issues.</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">solve</span>(Z) <span class="op">%*%</span><span class="st"> </span>Z</code></pre></div>
<pre><code>##                           [,1]                       [,2]
## [1,] 1.00000000000000000000000 -0.00000000000000006245005
## [2,] 0.00000000000000008326673  1.00000000000000022204460
## [3,] 0.00000000000000002775558  0.00000000000000000000000
##                           [,3]
## [1,] 0.00000000000000000000000
## [2,] 0.00000000000000005551115
## [3,] 1.00000000000000000000000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(<span class="dv">3</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    0    1    0
## [3,]    0    0    1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(<span class="kw">solve</span>(Z) <span class="op">%*%</span><span class="st"> </span>Z, <span class="kw">diag</span>(<span class="dv">3</span>))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div id="exercise" class="section level4">
<h4><span class="header-section-number">4.6.2.1</span> Exercise</h4>
<ul>
<li>Solve the following simultanoues equations using matrix calculation <span class="math display">\[
2x_1+3x_2   =10 \\
5x_1+x_2    =20
\]</span></li>
<li>Hint: You can write this as <span class="math inline">\(Ax=y\)</span> where A is the 2-times-2 matrix, x and y are vectors with the length of 2.</li>
</ul>
</div>
</div>
<div id="getting-information-for-matrix" class="section level3">
<h3><span class="header-section-number">4.6.3</span> Getting information for matrix</h3>
<ul>
<li><code>R</code> has a number of matrix specific functions for obtaining dimension and summary information.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">3</span>)
X</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(X)</code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rowSums</span>(X)</code></pre></div>
<pre><code>## [1]  9 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colSums</span>(X)</code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rowMeans</span>(X)</code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colMeans</span>(X)</code></pre></div>
<pre><code>## [1] 1.5 3.5 5.5</code></pre>
<ul>
<li>The <code>diag()</code> function can be used in a number of ways. We can extract the diagonal of a matrix.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(Z)</code></pre></div>
<pre><code>## [1]  9  4 16</code></pre>
<ul>
<li>Or create a matrix with specified elements on the diagonal. (And <code>0</code> on the off-diagonals.)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    0    0    0    0
## [2,]    0    2    0    0    0
## [3,]    0    0    3    0    0
## [4,]    0    0    0    4    0
## [5,]    0    0    0    0    5</code></pre>
<ul>
<li>Or, lastly, create a square matrix of a certain dimension with <code>1</code> for every element of the diagonal and <code>0</code> for the off-diagonals.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(<span class="dv">5</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    0    0    0    0
## [2,]    0    1    0    0    0
## [3,]    0    0    1    0    0
## [4,]    0    0    0    1    0
## [5,]    0    0    0    0    1</code></pre>
<!--

#### Calculations with Vectors and Matrices {-}

Certain operations in `R`, for example `%*%` have different behavior on vectors and matrices. To illustrate this, we will first create two vectors.


```r
a_vec = c(1, 2, 3)
b_vec = c(2, 2, 2)
```

Note that these are indeed vectors. They are not matrices.


```r
c(is.vector(a_vec), is.vector(b_vec))
```

```
## [1] TRUE TRUE
```

```r
c(is.matrix(a_vec), is.matrix(b_vec))
```

```
## [1] FALSE FALSE
```

When this is the case, the `%*%` operator is used to calculate the **dot product**, also know as the **inner product** of the two vectors.

The dot product of vectors $\boldsymbol{a} = \lbrack a_1, a_2, \cdots a_n \rbrack$ and $\boldsymbol{b} = \lbrack b_1, b_2, \cdots b_n \rbrack$ is defined to be

\[
\boldsymbol{a} \cdot \boldsymbol{b} = \sum_{i = 1}^{n} a_i b_i = a_1 b_1 + a_2 b_2 + \cdots a_n b_n.
\]


```r
a_vec %*% b_vec # inner product
```

```
##      [,1]
## [1,]   12
```

```r
a_vec %o% b_vec # outer product
```

```
##      [,1] [,2] [,3]
## [1,]    2    2    2
## [2,]    4    4    4
## [3,]    6    6    6
```

The `%o%` operator is used to calculate the **outer product** of the two vectors.

When vectors are coerced to become matrices, they are column vectors. So a vector of length $n$ becomes an $n \times 1$ matrix after coercion.


```r
as.matrix(a_vec)
```

```
##      [,1]
## [1,]    1
## [2,]    2
## [3,]    3
```

If we use the `%*%` operator on matrices, `%*%` again performs the expected matrix multiplication. So you might expect the following to produce an error, because the dimensions are incorrect.


```r
as.matrix(a_vec) %*% b_vec
```

```
##      [,1] [,2] [,3]
## [1,]    2    2    2
## [2,]    4    4    4
## [3,]    6    6    6
```

At face value this is a $3 \times 1$ matrix, multiplied by a $3 \times 1$ matrix. However, when `b_vec` is automatically coerced to be a matrix, `R` decided to make it a "row vector", a $1 \times 3$ matrix, so that the multiplication has conformable dimensions.

If we had coerced both, then `R` would produce an error.


```r
as.matrix(a_vec) %*% as.matrix(b_vec)
```

Another way to calculate a *dot product* is with the `crossprod()` function. Given two vectors, the `crossprod()` function calculates their dot product. The function has a rather misleading name.


```r
crossprod(a_vec, b_vec)  # inner product
```

```
##      [,1]
## [1,]   12
```

```r
tcrossprod(a_vec, b_vec)  # outer product
```

```
##      [,1] [,2] [,3]
## [1,]    2    2    2
## [2,]    4    4    4
## [3,]    6    6    6
```

These functions could be very useful later. When used with matrices $X$ and $Y$ as arguments, it calculates

\[
X^\top Y.
\]

When dealing with linear models, the calculation

\[
X^\top X
\]

is used repeatedly.


```r
C_mat = matrix(c(1, 2, 3, 4, 5, 6), 2, 3)
D_mat = matrix(c(2, 2, 2, 2, 2, 2), 2, 3)
```

This is useful both as a shortcut for a frequent calculation and as a more efficient implementation than using `t()` and `%*%`.


```r
crossprod(C_mat, D_mat)
```

```
##      [,1] [,2] [,3]
## [1,]    6    6    6
## [2,]   14   14   14
## [3,]   22   22   22
```

```r
t(C_mat) %*% D_mat
```

```
##      [,1] [,2] [,3]
## [1,]    6    6    6
## [2,]   14   14   14
## [3,]   22   22   22
```

```r
all.equal(crossprod(C_mat, D_mat), t(C_mat) %*% D_mat)
```

```
## [1] TRUE
```


```r
crossprod(C_mat, C_mat)
```

```
##      [,1] [,2] [,3]
## [1,]    5   11   17
## [2,]   11   25   39
## [3,]   17   39   61
```

```r
t(C_mat) %*% C_mat
```

```
##      [,1] [,2] [,3]
## [1,]    5   11   17
## [2,]   11   25   39
## [3,]   17   39   61
```

```r
all.equal(crossprod(C_mat, C_mat), t(C_mat) %*% C_mat)
```

```
## [1] TRUE
```
-->
</div>
</div>
<div id="lists" class="section level2">
<h2><span class="header-section-number">4.7</span> Lists</h2>
<ul>
<li>A list is a one-dimensional heterogeneous data structure.
<ul>
<li>It is indexed like a vector with a single integer value,</li>
<li>but each element can contain an element of any type.</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># creation</span>
<span class="kw">list</span>(<span class="dv">42</span>, <span class="st">&quot;Hello&quot;</span>, <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [[1]]
## [1] 42
## 
## [[2]]
## [1] &quot;Hello&quot;
## 
## [[3]]
## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex_list =<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),
  <span class="dt">b =</span> <span class="ot">TRUE</span>,
  <span class="dt">c =</span> <span class="st">&quot;Hello!&quot;</span>,
  <span class="dt">d =</span> <span class="cf">function</span>(<span class="dt">arg =</span> <span class="dv">42</span>) {<span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)},
  <span class="dt">e =</span> <span class="kw">diag</span>(<span class="dv">5</span>)
)</code></pre></div>
<ul>
<li>Lists can be subset using two syntaxes,
<ol style="list-style-type: decimal">
<li>the <code>$</code> operator, and</li>
<li>square brackets <code>[]</code>.</li>
</ol></li>
</ul>
<!--  
- The `$` operator returns a named **element** of a list. 
- The `[]` syntax returns a **list**, 
- `[[]]` returns an **element** of a list.

- `ex_list[1]` returns a list contain the first element.
- `ex_list[[1]]` returns the first element of the list, in this case, a vector.
-->
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># subsetting</span>
ex_list<span class="op">$</span>e</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    0    0    0    0
## [2,]    0    1    0    0    0
## [3,]    0    0    1    0    0
## [4,]    0    0    0    1    0
## [5,]    0    0    0    0    1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex_list[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</code></pre></div>
<pre><code>## $a
## [1] 1 2 3 4
## 
## $b
## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex_list[<span class="dv">1</span>]</code></pre></div>
<pre><code>## $a
## [1] 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex_list[<span class="kw">c</span>(<span class="st">&quot;e&quot;</span>, <span class="st">&quot;a&quot;</span>)]</code></pre></div>
<pre><code>## $e
##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    0    0    0    0
## [2,]    0    1    0    0    0
## [3,]    0    0    1    0    0
## [4,]    0    0    0    1    0
## [5,]    0    0    0    0    1
## 
## $a
## [1] 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex_list[<span class="st">&quot;e&quot;</span>]</code></pre></div>
<pre><code>## $e
##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    0    0    0    0
## [2,]    0    1    0    0    0
## [3,]    0    0    1    0    0
## [4,]    0    0    0    1    0
## [5,]    0    0    0    0    1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ex_list<span class="op">$</span>d</code></pre></div>
<pre><code>## function(arg = 42) {print(&quot;Hello World!&quot;)}</code></pre>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">4.8</span> Data Frames</h2>
<ul>
<li>We will talk about Dataframe in the next chapter.</li>
</ul>
</div>
<div id="programming-basics--control-flow-" class="section level2">
<h2><span class="header-section-number">4.9</span> Programming Basics -Control flow-</h2>
<div id="ifelse" class="section level3">
<h3><span class="header-section-number">4.9.1</span> if/else</h3>
<ul>
<li>The if/else syntax is:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (...) {
  some R code
} <span class="cf">else</span> {
  more R code
}</code></pre></div>
<ul>
<li>Example: To see whether x is large than y.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">1</span>
y =<span class="st"> </span><span class="dv">3</span>
<span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span>y) {
  z =<span class="st"> </span>x <span class="op">*</span><span class="st"> </span>y
  <span class="kw">print</span>(<span class="st">&quot;x is larger than y&quot;</span>)
} <span class="cf">else</span> {
  z =<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span>y
  <span class="kw">print</span>(<span class="st">&quot;x is less than or equal to y&quot;</span>)
}</code></pre></div>
<pre><code>## [1] &quot;x is less than or equal to y&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z</code></pre></div>
<pre><code>## [1] 16</code></pre>
<ul>
<li><code>R</code> also has a special function <code>ifelse()</code>
<ul>
<li>It returns one of two specified values based on a conditional statement.</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ifelse</span>(<span class="dv">4</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">0</span>)</code></pre></div>
<pre><code>## [1] 1</code></pre>
<ul>
<li>The real power of <code>ifelse()</code> comes from its ability to be applied to vectors.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fib =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">21</span>)
<span class="kw">ifelse</span>(fib <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>, <span class="st">&quot;Foo&quot;</span>, <span class="st">&quot;Bar&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Bar&quot; &quot;Bar&quot; &quot;Bar&quot; &quot;Bar&quot; &quot;Bar&quot; &quot;Foo&quot; &quot;Foo&quot; &quot;Foo&quot;</code></pre>
</div>
</div>
<div id="for-loop" class="section level2">
<h2><span class="header-section-number">4.10</span> <code>for</code> loop</h2>
<ul>
<li>A <code>for</code> loop repeats the same procedure for the specified number of times</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">15</span>
<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {
  x[i] =<span class="st"> </span>x[i] <span class="op">*</span><span class="st"> </span><span class="dv">2</span>
}

x</code></pre></div>
<pre><code>## [1] 22 24 26 28 30</code></pre>
<ul>
<li>Note that this <code>for</code> loop is very normal in many programming languages.</li>
<li>In <code>R</code> we would not use a loop, instead we would simply use a vectorized operation.
<ul>
<li><code>for</code> loop in <code>R</code> is known to be very slow.</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">15</span>
x =<span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">2</span>
x</code></pre></div>
<pre><code>## [1] 22 24 26 28 30</code></pre>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">4.11</span> Functions</h2>
<ul>
<li>To use a function,
<ul>
<li>you simply type its name,</li>
<li>followed by an open parenthesis,</li>
<li>then specify values of its arguments,</li>
<li>then finish with a closing parenthesis.</li>
</ul></li>
<li>An <strong>argument</strong> is a variable which is used in the body of the function.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The following is just a demonstration, not the real function in R.</span>
<span class="kw">function_name</span>(<span class="dt">arg1 =</span> <span class="dv">10</span>, <span class="dt">arg2 =</span> <span class="dv">20</span>)</code></pre></div>
<ul>
<li>We can also write our own functions in <code>R</code>.</li>
<li><p>Example: “standardize” variables <span class="math display">\[
\frac{x - \bar{x}}{s}
\]</span></p></li>
<li>When writing a function, there are three thing you must do.
<ol style="list-style-type: decimal">
<li>Give the function a name. Preferably something that is short, but descriptive.</li>
<li>Specify the arguments using <code>function()</code></li>
<li>Write the body of the function within curly braces, <code>{}</code>.</li>
</ol></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">standardize =<span class="st"> </span><span class="cf">function</span>(x) {
  m =<span class="st"> </span><span class="kw">mean</span>(x)
  std =<span class="st"> </span><span class="kw">sd</span>(x)
  result =<span class="st"> </span>(x <span class="op">-</span><span class="st"> </span>m) <span class="op">/</span><span class="st"> </span>std
  <span class="kw">return</span>(result)
}</code></pre></div>
<ul>
<li>Here the name of the function is <code>standardize</code>,</li>
<li>The function has a single argument <code>x</code> which is used in the body of function.</li>
<li><p>Note that the output of the final line of the body is what is returned by the function.</p></li>
<li>Let’s test our function</li>
<li><p>Take a random sample of size <code>n = 10</code> from a normal distribution with a mean of <code>2</code> and a standard deviation of <code>5</code>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_sample =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">mean =</span> <span class="dv">2</span>, <span class="dt">sd =</span> <span class="dv">5</span>)
test_sample</code></pre></div>
<pre><code>##  [1]  2.3820255 -0.9543363 -3.2900843 12.0869230  4.9342351  8.4175994
##  [7] -1.5038897  4.1897214  1.7550848  5.2398691</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">standardize</span>(<span class="dt">x =</span> test_sample)</code></pre></div>
<pre><code>##  [1] -0.2009650 -0.9114655 -1.4088787  1.8657579  0.3425452  1.0843509
##  [7] -1.0284966  0.1839960 -0.3344762  0.4076320</code></pre>
<ul>
<li>The same function can be written more simply.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">standardize =<span class="st"> </span><span class="cf">function</span>(x) {
  (x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)
}</code></pre></div>
<ul>
<li>When specifying arguments, you can provide default arguments.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">power_of_num =<span class="st"> </span><span class="cf">function</span>(num, <span class="dt">power =</span> <span class="dv">2</span>) {
  num <span class="op">^</span><span class="st"> </span>power
}</code></pre></div>
<ul>
<li>Let’s look at a number of ways that we could run this function to perform the operation <code>10^2</code> resulting in <code>100</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">power_of_num</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">power_of_num</span>(<span class="dv">10</span>, <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">power_of_num</span>(<span class="dt">num =</span> <span class="dv">10</span>, <span class="dt">power =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">power_of_num</span>(<span class="dt">power =</span> <span class="dv">2</span>, <span class="dt">num =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] 100</code></pre>
<ul>
<li>Note that without using the argument names, the order matters. The following code will not evaluate to the same output as the previous example.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">power_of_num</span>(<span class="dv">2</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] 1024</code></pre>
<ul>
<li>Also, the following line of code would produce an error since arguments without a default value must be specified.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">power_of_num</span>(<span class="dt">power =</span> <span class="dv">5</span>)</code></pre></div>
<ul>
<li><p>To further illustrate a function with a default argument, we will write a function that calculates sample variance two ways.</p></li>
<li><p>By default, the function will calculate the unbiased estimate of <span class="math inline">\(\sigma^2\)</span>, which we will call <span class="math inline">\(s^2\)</span>.</p></li>
</ul>
<p><span class="math display">\[
s^2 = \frac{1}{n - 1}\sum_{i=1}^{n}(x - \bar{x})^2
\]</span></p>
<ul>
<li>It will also have the ability to return the biased estimate (based on maximum likelihood) which we will call <span class="math inline">\(\hat{\sigma}^2\)</span>.</li>
</ul>
<p><span class="math display">\[
\hat{\sigma}^2 = \frac{1}{n}\sum_{i=1}^{n}(x - \bar{x})^2
\]</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">get_var =<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">unbiased =</span> <span class="ot">TRUE</span>) {

  <span class="cf">if</span> (unbiased <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>){
    n =<span class="st"> </span><span class="kw">length</span>(x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
  } <span class="cf">else</span> <span class="cf">if</span> (unbiased <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>){
    n =<span class="st"> </span><span class="kw">length</span>(x) 
   }

  (<span class="dv">1</span> <span class="op">/</span><span class="st"> </span>n) <span class="op">*</span><span class="st"> </span><span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_var</span>(test_sample)</code></pre></div>
<pre><code>## [1] 22.05045</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_var</span>(test_sample, <span class="dt">unbiased =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] 22.05045</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var</span>(test_sample)</code></pre></div>
<pre><code>## [1] 22.05045</code></pre>
<ul>
<li>We see the function is working as expected, and when returning the unbiased estimate it matches <code>R</code>’s built in function <code>var()</code>. Finally, let’s examine the biased estimate of <span class="math inline">\(\sigma^2\)</span>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_var</span>(test_sample, <span class="dt">unbiased =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## [1] 19.8454</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-of-r-and-r-studio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-frame.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
